const e=/^(?:(auth|placeholder|rel)|(image|media|video)|[^:]*):(\/*)((v[0-9]+(?=[/?]))?[^?]*(\?.*)?)$/,t=({debug:t,domain:r,path:a,output:s,quality:$,src:c,transform:i})=>{const o=`${r}/`,n=c.slice(0,o.length)===o,u=n?`media:${c.slice(o.length)}`:c,p=e.exec(u),d=p&&p[2],I=t?"/debug":"",l=s?`/output=${s}`:"",C=d?a&&!n?`${a}${p[3]?p[3][0]:""}${p[4]}`:p[4]:u,_=$?`/quality=${$}`:"",h=i?`/${i}`:"";return`${o}${p&&(p[1]||p[5])?`v1${I}${h}${l}/${d?`${p[2]}:${C}`:C}${_}`:`${C}${p&&p[6]?"&":"?"}twic=v1${I}${h}${l}${_}`}`};var r=e=>{const{src:r,width:a,quality:s}=e;return t({domain:process.env.NEXT_PUBLIC_TWICPICS_DOMAIN,path:process.env.NEXT_PUBLIC_TWICPICS_PATH,src:r,quality:s,transform:`resize=${a}`})},a=async e=>{const r=await fetch(t({domain:process.env.NEXT_PUBLIC_TWICPICS_DOMAIN,path:process.env.NEXT_PUBLIC_TWICPICS_PATH,src:e,transform:"resize=1000",output:"preview"})),a=await r.arrayBuffer();return`data:${r.headers.get("content-type")};base64,${Buffer.from(a).toString("base64")}`};export{r as twicpicsLoader,a as twicpicsPlaceholder};
//# sourceMappingURL=module.mjs.map
