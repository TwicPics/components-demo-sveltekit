"use strict";const e=/^(?:(auth|placeholder|rel)|(image|media|video)|[^:]*):(\/*)((v[0-9]+(?=[/?]))?[^?]*(\?.*)?)$/,t=({debug:t,domain:r,path:s,output:a,quality:$,src:c,transform:i})=>{const o=`${r}/`,n=c.slice(0,o.length)===o,u=n?`media:${c.slice(o.length)}`:c,p=e.exec(u),d=p&&p[2],I=t?"/debug":"",l=a?`/output=${a}`:"",C=d?s&&!n?`${s}${p[3]?p[3][0]:""}${p[4]}`:p[4]:u,_=$?`/quality=${$}`:"",h=i?`/${i}`:"";return`${o}${p&&(p[1]||p[5])?`v1${I}${h}${l}/${d?`${p[2]}:${C}`:C}${_}`:`${C}${p&&p[6]?"&":"?"}twic=v1${I}${h}${l}${_}`}`};exports.twicpicsLoader=e=>{const{src:r,width:s,quality:a}=e;return t({domain:process.env.NEXT_PUBLIC_TWICPICS_DOMAIN,path:process.env.NEXT_PUBLIC_TWICPICS_PATH,src:r,quality:a,transform:`resize=${s}`})},exports.twicpicsPlaceholder=async e=>{const r=await fetch(t({domain:process.env.NEXT_PUBLIC_TWICPICS_DOMAIN,path:process.env.NEXT_PUBLIC_TWICPICS_PATH,src:e,transform:"resize=1000",output:"preview"})),s=await r.arrayBuffer();return`data:${r.headers.get("content-type")};base64,${Buffer.from(s).toString("base64")}`};
//# sourceMappingURL=index.js.map
